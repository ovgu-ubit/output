{
  "id": 2,
  "workflow_id": "34b79b77-f291-4594-b184-4cdec11082c6",
  "label": "OpenAlex Import",
  "version": 1,
  "created_at": "2026-02-05T13:53:49.001Z",
  "modified_at": "2026-02-09T10:30:16.273Z",
  "published_at": null,
  "deleted_at": null,
  "description": "Query Import of OpenAlex",
  "strategy_type": 2,
  "strategy": {
    "format": "json",
    "max_res": 10,
    "delayInMs": 0,
    "get_count": "$.meta.count",
    "get_items": "$.results",
    "url_count": "https://api.openalex.org/works?filter=publication_year:[year],institutions.id:[openalex_id]",
    "url_items": "https://api.openalex.org/works?filter=publication_year:[year],institutions.id:[openalex_id]",
    "offset_name": "page",
    "max_res_name": "per-page",
    "offset_count": 1,
    "offset_start": 1,
    "request_mode": "page",
    "parallelCalls": 10,
    "exclusion_criteria": "$contains($.pub_type,\"dataset\")",
    "search_text_combiner": " or ",
    "only_import_if_authors_inst": false
  },
  "mapping": "(\r\n  $cfg := params.cfg;\r\n  $openalex_id := $cfg.openalex_id;\r\n  {\r\n      \"title\": $.title[0],\r\n      \"doi\": $.doi ? $substringAfter($.doi, \"doi.org/\") : undefined,\r\n      \"oa_category\": (\r\n          $status := $.open_access.oa_status;\r\n          $status = \"gold\" and $.apc_list.value = 0 ? \"diamond\" : $status\r\n      ),\r\n      \"authors_inst\": $.authorships[\r\n        (\r\n        $hits := $filter(institutions, function($aff) {\r\n          $contains($aff.id, $openalex_id)\r\n        });\r\n        $count($hits) > 0\r\n      )\r\n          ].{\r\n          \"first_name\": $join($filter($split(author.display_name, \" \"), function($v, $i) { $i < $count($split(author.display_name, \" \")) - 1 }),\" \"),\r\n          \"last_name\": $split(author.display_name, \" \")[-1],\r\n          \"orcid\": $split($string(author.orcid), \"/\")[-1],\r\n          \"corresponding\": is_corresponding,\r\n          \"affiliation\":  $join(raw_affiliation_strings, \"; \")\r\n          }[],\r\n      \"authors\": $join($.authorships.author.display_name[$type($) = \"string\"], \"; \"),\r\n      \"greater_entity\": {\r\n        \"label\": $.primary_location.source.display_name,\r\n        \"identifiers\": $.primary_location.source.issn ? $.primary_location.source.issn[].{\r\n          \"type\" : \"issn\",\r\n          \"value\" : $\r\n        } : undefined\r\n      },\r\n      \"publisher\": {\r\n        \"label\": $.primary_location.source.host_organization_name\r\n      },\r\n      \"pub_date\": $.publication_date ?? $.publication_year&\"-01-01\",\r\n      \"language\": $.language,\r\n      \"link\": $.primary_location.landing_page_url,\r\n      \"funder\": $.grants[].{\r\n          \"label\": funder_display_name\r\n      },\r\n      \"pub_type\": (\r\n          $type := $.type;\r\n          $type = \"article\" and $.primary_location.source.type = \"conference\" ? \"conference proceedings\" : $type\r\n          ),\r\n      \"license\": $.license,\r\n      \"status\": 1,\r\n      \"volume\": $.biblio.volume,\r\n      \"issue\" : $.biblio.issue,\r\n      \"first_page\" : $.biblio.first_page,\r\n      \"last_page\" : $.biblio.last_page,\r\n      \"page_count\": (\r\n          $start := $match($string($.biblio.first_page), /^(\\d+)$/);\r\n          $end := $match($string($.biblio.last_page), /^(\\d+)$/);\r\n          $end and $start ? $number($end.groups[0]) - $number($start.groups[0]) + 1 : undefined\r\n          ),\r\n      \"cost_approach\": (\r\n          $elem := $.apc_paid ? $.apc_paid : $.apc_list;\r\n          $elem.currency = \"EUR\" ? $elem.value : undefined;\r\n      )\r\n  }\r\n)",
  "update_config": {
    "doi": 2,
    "link": 2,
    "title": 2,
    "funder": 3,
    "status": 2,
    "authors": 2,
    "invoice": 2,
    "license": 2,
    "abstract": 2,
    "citation": 2,
    "contract": 2,
    "language": 2,
    "pub_date": 2,
    "pub_type": 2,
    "publisher": 2,
    "page_count": 2,
    "author_inst": 3,
    "oa_category": 2,
    "cost_approach": 2,
    "peer_reviewed": 2,
    "greater_entity": 2
  },
  "locked_at": "2026-02-09T10:30:16.269Z"
}